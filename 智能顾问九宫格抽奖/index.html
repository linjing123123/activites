<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
		<meta name="format-detection" content="telephone=no,email=no">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
		<title>难倒AI算你赢</title>
	    <link rel="stylesheet" type="text/css" href="../public/css/rem_reset.css?v={$v}">
		<link rel="stylesheet" type="text/css" href="../public/css/public.css?v={$v}">
		<link rel="stylesheet" type="text/css" href="../public/css/plugins.css?v={$v}">	    
	    <link rel="stylesheet" type="text/css" href="./css/style.css?v={$v}">	    
		<script src="../public/js/scale.js?v={$v}" type="text/javascript" charset="utf-8"></script>
	</head>
	<body>
		<div class="content">
			<div class="img-box">
				<img class="bg-img" src="./images/index1.png?v={v}" />
				<div class="radiate">
					<div class="radiate-wra">
						<div class="list">
							<div class="name">陈小小</div>
							<div class="detail">抽中一百元京东购物卡</div>
							<div class="time">24小时前</div>
						</div>
						<div class="list">
							<div class="name">陈小小</div>
							<div class="detail">抽中一百元京东购物卡</div>
							<div class="time">24小时前</div>
						</div>
					</div>
				</div>
				<div id="lottery" class="dial">
					<table border="0" cellpadding="0" cellspacing="0">
				        <tr>
				            <td class="lottery-unit lottery-unit-0">
				            	<div class="mask">
				            		<div class="jd100"></div>
				            		<div class="txt">100元<br />京东购物卡</div>
				            	</div>
				            </td>
				            <td class="lottery-unit lottery-unit-1">
				            	<div class="mask">
				            		<div class="aqy"></div>
				            		<div class="txt">爱奇艺<br />会员年卡</div>
				            	</div>
				            </td>
				            <td class="lottery-unit lottery-unit-2">
				            	<div class="mask">
				            		<div class="bai"></div>
				            		<div class="txt">100元<br />话费充值卡</div>
				            	</div>
				            </td>
				        </tr>
				        <tr>
				            <td class="lottery-unit lottery-unit-7">
				            	<div class="mask">
				            		<div class="bgzs"></div>
				            		<div class="txt">白鸽专属<br />特定疾病保险</div>
				            	</div>
				            </td>
				            <td><a id="start" class="start" href="###"></a></td>
				            <td class="lottery-unit lottery-unit-3">
				            	<div class="mask">
				            		<div class="bgzs"></div>
				            		<div class="txt">白鸽专属<br />特定疾病保险</div>
				            	</div>
				            </td>
				        </tr>
				        <tr>
				            <td class="lottery-unit lottery-unit-6">
				            	<div class="mask">
				            		<div class="bgxe"></div>
				            		<div class="txt">白鸽小额<br />意外伤害保险</div>
				            	</div>
				            </td>
				            <td class="lottery-unit lottery-unit-5">
				            	<div class="mask">
				            		<div class="thank"></div>
				            		<div class="txt">谢谢参与<br />&nbsp;</div>
				            	</div>
				            </td>
				            <td class="lottery-unit lottery-unit-4">
				            	<div class="mask">
				            		<div class="sixty-six"></div>
				            		<div class="txt">30元<br />白鸽保险代金券</div>
				            	</div>
				            </td>
				        </tr>
				    </table>
				</div>
				<div class="restnums-box">
					<div class="rows-wrap"><img class="bg-img" src="./images/rows.gif?v={v}" /></div>
					<div class="rest-desc">你还剩余<span class="rest-num"> 2 </span>次抽奖机会</div>
				</div>
			</div>
			<div class="img-box">
				<img class="bg-img" src="./images/index2.png?v={v}" />
				<div class="my-award-btn"></div>
				<div class="task-box">
					<!-- 去挑战 -->
					<div class="boxWrap gotiaozhan flexbox" style="display:none">
						<div class="task-licon"><img class="bg-img" src="./images/gotz-btn.png?v={v}" /></div>
						<div class="flexchild taskdes-box">
							<p class="task-tit">挑战智能AI</p>
							<p>当智能AI无法回复即挑战成功<br>可获得一次抽奖机会</p>
						</div>
						<div class="taskbtn">去挑战</div>
					</div>
					<!-- 已挑战 -->
					<div class="boxWrap gotiaozhan flexbox">
						<div class="task-licon"><img class="bg-img" src="./images/yitz-btn.png?v={v}" /></div>
						<div class="flexchild taskdes-box opcacity-4">
							<p class="task-tit">挑战智能AI</p>
							<p>当智能AI无法回复即挑战成功<br>可获得一次抽奖机会</p>
						</div>
						<div class="taskbtn opcacity-4">已挑战</div>
					</div>
					<!-- 去分享 -->
					<div class="boxWrap goshare flexbox">
						<div class="task-licon"><img class="bg-img" src="./images/goshare-btn.png?v={v}" /></div>
						<div class="flexchild taskdes-box">
							<p class="task-tit">分享活动页面</p>
							<p>首次分享活动链接给好友或朋友圈<br>可获得一次抽奖机会 </p>
						</div>
						<div class="taskbtn gosharebtn">去分享</div>
					</div>
					<!-- 已分享 -->
					<div class="boxWrap goshare flexbox" style="display:none">
						<div class="task-licon"><img class="bg-img" src="./images/yishare-btn.png?v={v}" /></div>
						<div class="flexchild taskdes-box opcacity-4">
							<p class="task-tit">分享活动页面</p>
							<p>首次分享活动链接给好友或朋友圈<br>可获得一次抽奖机会 </p>
						</div>
						<div class="taskbtn opcacity-4">已分享</div>
					</div>
				</div>
			</div>
			<div class="img-box">
				<img class="bg-img" src="./images/index3.png" />
			    <div class="detailBox">
					<div class="detail-list">
						<span class="dot-num">1</span>活动时间：2018年11月29日-12月12日
					</div>
					<div class="detail-list">
						<span class="dot-num">2</span>用户在<span class="lighttxt">【智能顾问】</span>页面输入任一<span class="lighttxt">保险相关</span>问题即视为发起挑战，当智能AI<span class="lighttxt">无法回复</span>即<span class="lighttxt">挑战成功</span>，获得<span class="lighttxt">一次</span>抽奖机会；
					</div>
					<div class="detail-list">
						<span class="dot-num">3</span>每人每天可向智能AI发起4次挑战；
					</div>
					<div class="detail-list">
						<span class="dot-num">4</span>首次分享<span class="lighttxt">活动链接</span>给好友或朋友圈，可获得<span class="lighttxt">一次</span>抽奖机会；
					</div>
					<div class="detail-list">
						<span class="dot-num">5</span>挑战所获得的抽奖次数可<span class="lighttxt">累计</span>；
					</div>
					<div class="detail-list">
						<span class="dot-num">6</span>本次活动抽奖所获得奖品请在12月13日24:00前进行领取兑换，否则自动失效；
					</div>
					<div class="detail-list">
						<span class="dot-num">7</span>本次活动如有疑问请联系在线客服
					</div>
				</div>			
			</div>
		</div>
		<!--遮罩-->
		<div class="dialog2"></div>
		<!--奖品领取弹窗-->
		<div class="award-dialog" style="display: none;">
			<div class="award-close"></div>
			<div class="award-img-box">
				<div class="mask">
            		<div class="thank"></div>
            		<div class="txt">100元<br>京东购物卡</div>
            	</div>
			</div>
			<div class="award-text">恭喜您</div>
			<div class="award-name">获得白鸽特定疾病保险</div>
			<a class="award-btn index-btn" href="">立即领取</a>
		</div>
		<!--挑战ai-->
		<div class="challenge-dialog" style="display: none;">
			<div class="text">想要获取抽奖资格<br/>请先挑战智能AI，<br/>挑战成功即可抽奖</div>
			<a class="challenge-btn index-btn" href="">开始挑战</a>
			<div class="challenge-close"></div>
		</div>
		<!-- 分享弹框 -->
		<div class="alertShareBox">
			<div class="alertShare">
				<img src="./images/share-bg.png?v={$v}">
			</div>
		</div>
	</body>
	<script src="../public/js/jquery-1.9.1.min.js?v={$v}"></script>
	<script src="../public/js/public.js?v={$v}"></script>
	<script src="../public/js/dialog.min.js?v={$v}"></script>
	<script src="../public/js/zepto.alert.js?v={$v}"></script>
	<script>
		$(function(){
			$(".award-close").on("click",function(){
				$(".dialog2,.award-dialog").hide();
			})
			$(".challenge-close").on("click",function(){
				$(".dialog2,.challenge-dialog").hide();
			})
			//调用广告轮播
			var startRollOne = setInterval(lunbo,2000);
			//

			//点击分享
			$(".gosharebtn").on("click",function(){
				$(".alertShareBox").show();
				$(".content").addClass("overflowH");
			});
			//关闭分享页
			$(".alertShareBox").on("click",function(){
				$(this).hide();
				$(".content").removeClass("overflowH");
			});
		})
		
		//广告轮播
		function lunbo(){
            $(".radiate-wra").animate({marginTop:"-.5rem"},1000,"linear",function(){  
            	$(this).children(".list").first().remove().clone(true).appendTo(".radiate-wra");
                $(this).css("margin-top","0rem");      
            });  
            
        }
	</script>
	<script>
		//抽奖
		//抽奖
		var lottery={
		    index:-1,    //当前转动到哪个位置，起点位置
		    count:0,    //总共有多少个位置
		    timer:0,    //setTimeout的ID，用clearTimeout清除
		    speed:20,    //初始转动速度
		    times:0,    //转动次数
		    cycle:50,    //转动基本次数：即至少需要转动多少次再进入抽奖环节
		    prize:-1,    //中奖位置
		    init:function(id){
		        if ($("#"+id).find(".lottery-unit").length>0) {
		            $lottery = $("#"+id);
		            $units = $lottery.find(".lottery-unit");
		            this.obj = $lottery;
		            this.count = $units.length;
		            $lottery.find(".lottery-unit-"+this.index).find(".mask").addClass("active");
		        };
		    },
		    roll:function(){
		        var index = this.index;
		        var count = this.count;
		        var lottery = this.obj;
		        $(lottery).find(".lottery-unit-"+index).find(".mask").removeClass("active");
		        index += 1;
		        if (index>count-1) {
		            index = 0;
		        };
		        $(lottery).find(".lottery-unit-"+index).find(".mask").addClass("active");
		        this.index=index;
		        return false;
		    },
		    stop:function(index){
		        this.prize=index;
		        return false;
		    }
		};
		function roll(){
		    lottery.times += 1;
		    lottery.roll();//转动过程调用的是lottery的roll方法，这里是第一次调用初始化
		    if (lottery.times > lottery.cycle+10 && lottery.prize==lottery.index) {
		        clearTimeout(lottery.timer);
		        lottery.prize=-1;
		        lottery.times=0;
				//显示中奖弹框
				console.log("恭喜您中了爱奇艺会员卡");
		        click=false;
		    }else{
		        if (lottery.times<lottery.cycle) {
		            lottery.speed -= 10;
		        }else if(lottery.times==lottery.cycle) {
		            //ajax奖品接口
		            lottery.prize = 1; 
			        // $.ajax({
	                //  　			url:'',
	                //    	type:"POST",
	                //    	dataType:"json",
	                //   	async:false,
	                // 	success:function(res){
	                //        	if(res.status==1000){
	                //             lottery.speed=100;
	                //             roll();
	                //             click=true;    
	                //             return false;
	                //      	}else{
	                //         	/*错误处理*/
	                //       	}
	                //   	}
	             	// });
		        }else{
		            if (lottery.times > lottery.cycle+10 && ((lottery.prize==0 && lottery.index==7) || lottery.prize==lottery.index+1)) {
		                lottery.speed += 110;
		            }else{
		                lottery.speed += 20;
		            }
		        }
		        if (lottery.speed<40) {
		            lottery.speed=40;
		        };
		        lottery.timer = setTimeout(roll,lottery.speed);//循环调用
		    }
		    return false;
		}
		
		var click=false;
		
		window.onload=function(){
		    lottery.init('lottery');
		    $("#lottery a").click(function(){		    	
		        if (click) {//click控制一次抽奖过程中不能重复点击抽奖按钮，后面的点击不响应
		            return false;
		        }else{
		        	//判断登录
		            lottery.speed=100;
		            roll();    //转圈过程不响应click事件，会将click置为false
		            click=true; //一次抽奖完成后，设置click为true，可继续抽奖
		            return false;
		        }
		    });
		};
		
	</script>
</html>
